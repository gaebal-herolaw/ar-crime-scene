# 🌳 역사 현장 AR — 5·18 나무 총격 재현

QR코드(마커) 기반 웹 AR로 과거 사건 현장의 총알 충격 장면을 재현합니다.  
앱 설치 없이 스마트폰 브라우저에서 바로 체험할 수 있습니다.

## 🎯 데모

**👉 [AR 체험하기](https://winwin-ai.github.io/ar_518_tree/)**

마커 이미지(`ar-marker.png`)를 인쇄하거나 다른 화면에 띄운 뒤, 위 링크를 모바일로 열고 카메라를 마커에 비춰주세요.

## 📁 파일 구조

```
├── index.html           # 메인 AR 페이지
├── ar-marker.png        # AR 마커 이미지 (인쇄용)
├── targets.mind         # MindAR 컴파일된 마커 데이터
├── compile-marker.html  # 마커 재컴파일 도구 (개발용)
└── README.md
```

## 🚀 사용법

### 현장 설치

1. **마커 인쇄**: `ar-marker.png`를 A4 이상 크기로 인쇄
2. **QR코드 생성**: AR 페이지 URL을 QR코드로 변환
3. **설치**: QR코드와 마커를 나란히 벽에 부착 (나무 옆)

### 사용자 체험 흐름

```
QR코드 스캔 → 브라우저 오픈 → 카메라 허용
→ 마커 인식 → 총알 충격 이펙트 재생
→ 20초마다 반복 (페이지를 나갈 때까지)
```

## 💥 이펙트 상세

| 단계 | 시간 | 내용 |
|------|------|------|
| 1 | 0~0.1초 | 섬광 (impact flash) |
| 2 | 0~1.5초 | 나무 파편 30개 비산 |
| 3 | 0~2초 | 먼지 구름 확산 |
| 4 | 0.05~3초 | 총알 자국 + 균열 표시 |
| 5 | 3~4초 | 페이드 아웃 |

이펙트는 **20초 간격**으로 반복 재생됩니다.

## ⚙️ 이펙트 위치 조정

### 방법 1: URL 파라미터

```
https://winwin-ai.github.io/ar_518_tree/?x=0.5&y=0.3&z=0&scale=1.0
```

| 파라미터 | 설명 | 기본값 | 범위 |
|----------|------|--------|------|
| `x` | 좌우 위치 (양수=오른쪽) | 0.5 | -3 ~ 3 |
| `y` | 상하 위치 (양수=위) | 0.3 | -3 ~ 3 |
| `z` | 앞뒤 위치 (양수=카메라쪽) | 0 | -3 ~ 3 |
| `scale` | 이펙트 크기 | 1.0 | 0.1 ~ 3 |

### 방법 2: 실시간 슬라이더

AR 화면에서 **⚙️ 좌표 편집** 버튼 → 슬라이더로 조정 → **📋 좌표 복사**

## 🛠️ 좌표계

```
         Y+ (위)
         │
         │
         │───── X+ (오른쪽)
        /
       /
      Z+ (카메라 방향)

원점 (0,0,0) = 마커 중심
```

단위는 마커 크기 기준 상대값입니다.

## 🔧 기술 스택

- **[MindAR.js](https://github.com/hiukim/mind-ar-js)** v1.2.5 — 이미지 타겟 트래킹
- **[Three.js](https://threejs.org/)** v0.153.0 — 3D 렌더링 & 파티클 시스템
- **바닐라 JavaScript** — 프레임워크 없음
- **GitHub Pages** — 정적 호스팅 (HTTPS)

## 📋 마커 재컴파일

마커 이미지를 변경한 경우:

1. 새 이미지를 `ar-marker.png`로 교체
2. `compile-marker.html`을 브라우저에서 열기
3. "컴파일 시작" 클릭 → `targets.mind` 다운로드
4. 다운로드된 파일로 `targets.mind` 교체

### 좋은 마커 조건

- ✅ 고대비, 비대칭 디자인
- ✅ 다양한 특징점 (텍스트, 도형, 패턴 등)
- ✅ A4 이상 크기로 인쇄
- ❌ QR코드 단독 사용 (반복 패턴으로 트래킹 불안정)

## 📱 지원 환경

- iOS Safari 15+
- Android Chrome 90+
- HTTPS 필수 (카메라 접근에 필요)

## 📄 라이선스

MIT
